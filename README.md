# CryptoSlon - SAST-анализ - задача №3
Привет, эта инструкция по установке и запуску агента для решения задачи №3 
из хакатона. 

Базово агент настроен на использование gigachat-max и работает стабильно. 
Аген тестировался на OpenAI GPT-5-mini и GPT-5, где так же показал стабильную работу.

## Установка и настройка

### 1. Установка зависимостей
```bash
pip install -r requirements.txt
```

### 2. Настройка переменных окружения
Скопируйте `.env.example` в `.env` и добавьте API ключи:
```bash
cp .env.example .env
```

Заполните файл `.env`:
```
GIGACHAT_CREDENTIALS=ваш_ключ_gigachat - необходимо
OPENAI_API_KEY=ваш_ключ_openai - опционально
```
### 3. Установка внешних приложений
На сервере должен быть установлен инструмент semgrep
```bash
pip install semgrep
```

## Запуск
Агент может быть запущен в двух режимах - интерактивном (в режиме чата) и автоматическом.

Агент умеет делать следующие вещи: 
- Проводить базовый SAST-анализ кода
- Проводить triage-анализ отчета, полученного в ходе базового SAST-анализа
- Генерировать фиксы уязвимостей на основе triage-анализа
- Делать инъекции фиксов в код
- Проводить весь пайплайн за раз

Система получилась довольно хрупкой, поэтому с интерактивным режимом лучше не баловаться.

Вызов автоматического агента
```bash
python main.py sast automated -c "run full pipeline for /absolute/path/to/code_folder"
```
-c "run full pipeline for /path/to/code" - команда, которая передается в Агента, как инструкция к действию. 
Эта команда обрабатывается LLM, так что можно не придерживаться строгого формата, лишь бы смысл сохранялся.

Запуск агента в интерактивном режиме
```bash
python main.py sast interactive
```
Примеры команд, с которыми интерактивный агент хорошо справляется: 
- Сделай базовый SAST анализ моего кода /absolute/path/to/code/folder
- Сделай триаж анализ этого отчета /absolute/path/to/aggregated/report
- Запусти полный пайплайн на мой код /absolute/path/to/code/folder

Самое стабильное решение - запустить автоматического агента с полным пайплайном на существующий каталог.
